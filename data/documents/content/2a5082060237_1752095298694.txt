WASHINGTON (AP) — Senate Republicans hauled President Donald Trump’s big tax breaks and spending cuts bill to passage Tuesday on the narrowest of votes, pushing past opposition from Democrats and their own GOP ranks after a turbulent overnight session.

Watch the Senate debate Trump’s budget bill in the player above.

Vice President JD Vance broke a 50-50 tie to push it over the top. The three Republicans opposing the bill were Sens. Thom Tillis of North Carolina, Susan Collins of Maine and Sen. Rand Paul of Kentucky.

The outcome capped an unusually tense weekend of work at the Capitol, the president’s signature legislative priority teetering on the edge of approval, or collapse.

The difficulty it took for Republicans, who have the majority hold in Congress, to wrestle the bill to this point is not expected to let up. The package now goes back to the House, where Speaker Mike Johnson had warned senators not to deviate too far from what his chamber had already approved. But the Senate did make changes, particularly to Medicaid, risking more problems as they race to finish by Trump’s Fourth of July deadline.

The outcome is a pivotal moment for president and his party, which have been consumed by the 940-page “One Big Beautiful Bill Act,” as it’s formally titled, and invested their political capital in delivering on the GOP’s sweep of power in Washington.

Trump acknowledged it’s “very complicated stuff,” as he departed the White House for Florida.

“I don’t want to go too crazy with cuts,” he said. “I don’t like cuts.”

What started as a routine but laborious day of amendment voting, in a process called vote-a-rama, spiraled into a round-the-clock slog as Republican leaders were buying time to shore up support.

The droning roll calls in the chamber belied the frenzied action to steady the bill. Grim-faced scenes played out on and off the Senate floor, amid exhaustion.

Senate Majority Leader John Thune of South Dakota was desperately reaching for last-minute agreements between those in his party worried the bill’s reductions to Medicaid will leave millions without care, and his most conservative flank, which wants even steeper cuts to hold down deficits ballooning with the tax cuts.

The GOP leaders have no room to spare, with narrow majorities. Thune can lose no more than three Republican senators, and already two — Tillis, who warned that millions of people will lose access to Medicaid health care, and Paul, who opposes raising the debt limit by $5 trillion — had indicated opposition.

Attention quickly turned to two key senators, Lisa Murkowski of Alaska and Collins, who also raised concerns about health care cuts, as well as a loose coalition of four conservative GOP senators pushing for even steeper reductions.

Murkowski in particular became the subject of the GOP leadership’s attention, as they sat beside her for talks. She was huddled intensely for more than an hour in the back of the chamber with others, scribbling notes on papers.

Then all eyes were on Paul after he returned from a visit to Thune’s office with a stunning offer that could win his vote. He had suggested substantially lowering the bill’s increase in the debt ceiling, according to two people familiar with the private meeting and granted anonymity to discuss it.

Senate Democratic Leader Chuck Schumer of New York said “Republicans are in shambles because they know the bill is so unpopular.”

An analysis from the nonpartisan Congressional Budget Office found 11.8 million more Americans would become uninsured by 2034 if the bill became law. The CBO said the package would increase the deficit by nearly $3.3 trillion over the decade.

And on social media, billionaire Elon Musk was again lashing out at Republicans as “the PORKY PIG PARTY!!” for including the $5 trillion debt ceiling in the package, which is needed to allow continued borrowing to pay the bills.

Senators insist on changes

Few Republicans appeared fully satisfied as the final package emerges, in either the House or Senate.

Collins had proposed bolstering the $25 billion proposed rural hospital fund to $50 billion, offset with a higher tax rate on those earning more than $25 million a year, but her amendment failed.

And Murkowski was trying to secure provisions to spare people in her state from some food stamp cuts, which appeared to be accepted, while she was also working to beef up federal reimbursements to hospitals in Alaska and others states, that did not comply with parliamentary rules.

“Radio silence,” Murkowski said when asked how she would vote.

The conservative senators demanding a vote on their steeper health care cuts, including Rick Scott of Florida, Mike Lee of Utah, Ron Johnson of Wisconsin and Cynthia Lummis of Wyoming, filed into Thune’s office near-midnight.

What’s in the big bill

All told, the Senate bill includes $4.5 trillion in tax cuts, according to the latest CBO analysis, making permanent Trump’s 2017 rates, which would expire at the end of the year if Congress fails to act, while adding the new ones he campaigned on, including no taxes on tips.

The Senate package would roll back billions of dollars in green energy tax credits, which Democrats warn will wipe out wind and solar investments nationwide. It would impose $1.2 trillion in cuts, largely to Medicaid and food stamps, by imposing work requirements on able-bodied people, including some parents and older Americans, making sign-up eligibility more stringent and changing federal reimbursements to states.

Additionally, the bill would provide a $350 billion infusion for border and national security, including for deportations, some of it paid for with new fees charged to immigrants.

Democrats fighting all day and night

Unable to stop the march toward passage, the Democrats tried to drag out the process, including with a weekend reading of the full bill.

A few of the Democratic amendments won support from a few Republicans, though almost none were passing. More were considered in one of the longer such sessions in modern times.

One amendment overwhelmingly approved stripped a provision barring states from regulating artificial intelligence if they receive certain federal funding.

Sen. Patty Murray of Washington, the ranking Democrat on the Appropriations Committee, raised particular concern about the accounting method being used by the Republicans, which says the tax breaks from Trump’s first term are now “current policy” and the cost of extending them should not be counted toward deficits.

She said that kind of “magic math” won’t fly with Americans trying to balance their own household books.

Associated Press writers Joey Cappelletti, Darelene Superville and Kevin Freking contributed to this report.